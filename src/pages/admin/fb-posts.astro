---
/**
 * Facebook Posts Admin Page
 *
 * SSR page at /admin/fb-posts.
 * Lists all generated FB posts with preview, copy, and regenerate.
 *
 * Generate posts first:  npm run generate:fb-posts:pl
 */

import Layout from '@/layouts/Layout.astro';
import FbPostsManager from '@/components/admin/FbPostsManager';
import { loadFbPosts } from '@lib/fbPostGenerator';

export const prerender = false;

const posts = loadFbPosts();
---

<Layout title="FB Posts Admin" lang="pl">
  <main class="pt-24 pb-16 max-w-4xl mx-auto px-4">
    <div class="mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
      <div>
        <h1 class="text-3xl font-bold text-gray-900">Posty na Facebooka</h1>
        <p class="text-gray-500 mt-1">
          {posts.length} {posts.length === 1 ? 'wygenerowany post' : posts.length >= 2 && posts.length <= 4 ? 'wygenerowane posty' : 'wygenerowanych postów'}
          &nbsp;·&nbsp;
          <a href="/admin/analytics" class="text-blue-600 hover:underline">Analityka</a>
        </p>
      </div>
      <div class="text-sm text-gray-400 bg-gray-50 border border-gray-200 rounded-xl px-4 py-2">
        <span class="text-gray-500 font-medium">Generuj:</span>
        <code class="ml-1 text-gray-700 font-mono">npm run generate:fb-posts:pl</code>
      </div>
    </div>

    <FbPostsManager initialPosts={posts} client:load />
  </main>
</Layout>
